{% extends "base.html" %}
{% load staticfiles %}
{% block content %}

{% if valide != '' %}
<br />
<center><strong>{{ valide }}</strong></center>
{% endif %}

{% if projet and user.is_authenticated %}
	{% if user.typeUser == 'Professionnel' and namePrestataire == '' %}
		<div>
			<form method="post">
				{% csrf_token %}
				<button class="prestataire_button">+</button>
				<input type="email" name="email" placeholder="Entrez l'email du Prestataire à ajouter au projet" style="width: 26%">
			</form>
		</div>
	{% endif %}

	<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
	    <input type="file" name="document" required>
	    {% if user.typeUser == 'Client' %}
	    <select id="monselect" name="typeName" required>
			<option value="documents_contrat">Documents nécessaires au contrat</option> 
			<option value="photos" selected>Photos</option>
		</select>
	    {% elif user.typeUser == 'Prestataire' %}
	    <select id="monselect" name="typeName" required>
			<option value="devis">Devis</option> 
			<option value="facture" selected>Facture</option>
			<option value="photos">Photos</option> 
			<option value="avancee_pre" selected>Avancée du projet</option>
		</select>
	    {% elif user.typeUser == 'Professionnel'%}
	    <select id="monselect" name="typeName" required>
			<option value="demande_travaux">Demande de travaux</option> 
			<option value="contrat" selected>Contrat du projet</option>
			<option value="photos" selected>Photos</option>
			<option value="avancee_pro" selected>Avancée du projet</option>
		</select>
	    {% endif %}
	    <button class="prestataire_button">Upload</button>
	</form>
	
	<table>
		<tr>
		 <th></th>
		 <th>Infos projet</th>
		</tr>
		<tr>
		 <th>Nom</th>
		 <td>{{ projet.titre }}</td>
		</tr>
		<tr>
		 <th>Client</th>
		 <td>{{ nameClient }}</td>
		</tr>
		<tr>
		 <th>Professionnel</th>
		 <td>{{ nameProfessionnel }}</td>
		</tr>
		<tr>
		 <th>Prestataire</th>
		 <td>{{ namePrestataire }}</td>
		</tr>
		<tr>
		 <th>Date début</th>
		 <td>{{ projet.date_debut }}</td>
		</tr>
		<tr>
		 <th>Date fin</th>
		 <td>{{ projet.date_fin }}</td>
		</tr>
		<tr>
		 <th>Description</th>
		 <td>{{ projet.description }}</td>
		</tr>
	</table>

	
		<table>
			<tr>
		     <th>Nom du document</th>
		     <th>Type de document</th>
		     <th>Uploadé par</th>
		     <th>Date d'upload</th>
		    </tr>
			<tr>
			{% for file in files %}
		     	<td>{{ file.original_name }}</td>
		     	<td>{{ file.typeName }}</td>
		     	<td>{{ file.uploaded_by }}</td>
		     	<td>{{ file.upload_date }}</td>
		     	<form method='post' action=/download/{{ file.document }}>
		     		<td><input type="submit" title="Télécharger" name="download" value="  " style="background-image:url({% static 'img/download.jpg' %});cursor:pointer;"/></td>
		     	</form>
		    </tr>
			{% endfor %}
		</table>
	

{% endif %}




{% endblock %}